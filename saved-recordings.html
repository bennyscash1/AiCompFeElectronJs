<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Saved Recordings</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 40px;
      background: linear-gradient(135deg, #e6f0ff, #d6ecff);
      color: #0b2545;
    }

    h2 {
      font-size: 28px;
      margin-bottom: 20px;
    }

    .record-entry {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .record-entry button {
      padding: 8px 12px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .run-btn {
      background-color: #d2e3fc;
      color: #154c79;
    }

    .delete-btn {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .note {
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>
  <h2>üé• Saved Recordings</h2>
  <a href="record.html">‚Üê Back to Record</a>

  <div id="recordList"></div>

  <script>
    function loadSavedRecordings() {
      const list = document.getElementById("recordList");
      list.innerHTML = "";

      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith("record_")) {
          const record = JSON.parse(localStorage.getItem(key));
          const name = key.replace("record_", "");

          const wrapper = document.createElement("div");
          wrapper.className = "record-entry";

          const title = document.createElement("span");
          title.textContent = `üé• ${name}`;

          const runBtn = document.createElement("button");
          runBtn.textContent = "‚ñ∂Ô∏è Run";
          runBtn.className = "run-btn";
          runBtn.onclick = () => {
            const url = `run-record.html?runApp=${encodeURIComponent(record.RuningApp)}&recordName=${encodeURIComponent(record.RecordFileName)}`;
            window.open(url, "_blank");
          };

          const deleteBtn = document.createElement("button");
          deleteBtn.textContent = "‚ùå Delete";
          deleteBtn.className = "delete-btn";
          deleteBtn.onclick = () => {
            if (confirm(`Delete recording "${name}"?`)) {
              localStorage.removeItem(key);
              wrapper.remove();
            }
          };

          const note = document.createElement("div");
          note.className = "note";
          note.textContent = record.Notes || record.SavedAt || "";

          wrapper.appendChild(title);
          wrapper.appendChild(runBtn);
          wrapper.appendChild(deleteBtn);
          wrapper.appendChild(note);

          list.appendChild(wrapper);
        }
      }

      if (list.innerHTML === "") {
        list.innerHTML = "<p>No recordings found.</p>";
      }
    }

    window.onload = loadSavedRecordings;
  </script>
</body>
</html>
